<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Replivo Extension Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .form-group {
            margin: 15px 0;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, textarea, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background: #007cba;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #005a8b;
        }
        .extraction-target {
            background: #e7f3ff;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #007cba;
        }
        .clickable-element {
            background: #fff3cd;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ffc107;
            border-radius: 4px;
            cursor: pointer;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-success { background: #28a745; }
        .status-pending { background: #ffc107; }
        .status-error { background: #dc3545; }
        .demo-results {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>üöÄ Replivo Extension Test Demo</h1>
    <p>This page demonstrates the Replivo Helper extension capabilities for browser automation.</p>

    <!-- Form Filling Test -->
    <div class="test-section">
        <h2>üìù Form Filling Test</h2>
        <p>The extension can automatically fill forms with provided data:</p>
        
        <form id="demo-form">
            <div class="form-group">
                <label for="customer-name">Customer Name:</label>
                <input type="text" id="customer-name" name="customerName" placeholder="Enter customer name">
            </div>
            
            <div class="form-group">
                <label for="customer-email">Email Address:</label>
                <input type="email" id="customer-email" name="customerEmail" placeholder="customer@example.com">
            </div>
            
            <div class="form-group">
                <label for="issue-type">Issue Type:</label>
                <select id="issue-type" name="issueType">
                    <option value="">Select issue type</option>
                    <option value="billing">Billing Question</option>
                    <option value="technical">Technical Support</option>
                    <option value="general">General Inquiry</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="issue-description">Issue Description:</label>
                <textarea id="issue-description" name="issueDescription" rows="4" placeholder="Describe the issue..."></textarea>
            </div>
            
            <div class="form-group">
                <label for="priority">Priority Level:</label>
                <select id="priority" name="priority">
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                    <option value="urgent">Urgent</option>
                </select>
            </div>
            
            <button type="submit" id="submit-form">Submit Ticket</button>
            <button type="button" id="clear-form">Clear Form</button>
        </form>
    </div>

    <!-- Content Extraction Test -->
    <div class="test-section">
        <h2>üìä Content Extraction Test</h2>
        <p>The extension can extract specific content from web pages:</p>
        
        <div class="extraction-target" id="customer-info">
            <h3>Customer Information</h3>
            <p><strong>Name:</strong> <span id="display-name">John Smith</span></p>
            <p><strong>Account ID:</strong> <span id="account-id">ACC-12345</span></p>
            <p><strong>Status:</strong> <span id="account-status">Premium Member</span></p>
            <p><strong>Last Login:</strong> <span id="last-login">2025-08-21 10:30 AM</span></p>
        </div>
        
        <div class="extraction-target" id="order-details">
            <h3>Recent Order</h3>
            <p><strong>Order #:</strong> <span id="order-number">ORD-78901</span></p>
            <p><strong>Amount:</strong> <span id="order-amount">$299.99</span></p>
            <p><strong>Date:</strong> <span id="order-date">2025-08-20</span></p>
            <p><strong>Status:</strong> <span id="order-status">Delivered</span></p>
        </div>
    </div>

    <!-- Element Interaction Test -->
    <div class="test-section">
        <h2>üñ±Ô∏è Element Interaction Test</h2>
        <p>The extension can click buttons and interact with page elements:</p>
        
        <div class="clickable-element" id="action-approve">
            <strong>Approve Refund Request</strong>
            <p>Click to approve the customer's refund request</p>
        </div>
        
        <div class="clickable-element" id="action-escalate">
            <strong>Escalate to Manager</strong>
            <p>Click to escalate this case to a manager</p>
        </div>
        
        <div class="clickable-element" id="action-close">
            <strong>Close Ticket</strong>
            <p>Click to mark this ticket as resolved</p>
        </div>
        
        <button id="toggle-status">Toggle Account Status</button>
        <button id="refresh-data">Refresh Customer Data</button>
    </div>

    <!-- Navigation Test -->
    <div class="test-section">
        <h2>üß≠ Navigation Test</h2>
        <p>The extension can navigate between different sections:</p>
        
        <button onclick="window.location.hash='#dashboard'">Go to Dashboard</button>
        <button onclick="window.location.hash='#customers'">Customer List</button>
        <button onclick="window.location.hash='#reports'">Reports</button>
        <button onclick="window.location.hash='#settings'">Settings</button>
        
        <p><strong>Current Location:</strong> <span id="current-location">Dashboard</span></p>
    </div>

    <!-- Extension Status -->
    <div class="test-section">
        <h2>üîå Extension Status</h2>
        <p id="extension-status">
            <span class="status-indicator status-pending"></span>
            Checking extension connection...
        </p>
        
        <div id="demo-results" class="demo-results" style="display: none;">
            <h4>Last Command Result:</h4>
            <pre id="command-result"></pre>
        </div>
        
        <button id="test-connection">Test Extension Connection</button>
        <button id="simulate-agent-task">Simulate Agent Task</button>
    </div>

    <!-- Mock CRM Interface -->
    <div class="test-section">
        <h2>üíº Mock CRM Interface</h2>
        <p>Simulated CRM system for testing agent automation:</p>
        
        <div style="display: flex; gap: 20px; margin: 20px 0;">
            <div style="flex: 1;">
                <h4>Customer Queue</h4>
                <div class="clickable-element" data-customer="cust-001">
                    <strong>Sarah Johnson</strong><br>
                    Issue: Billing inquiry<br>
                    Priority: High
                </div>
                <div class="clickable-element" data-customer="cust-002">
                    <strong>Mike Chen</strong><br>
                    Issue: Technical support<br>
                    Priority: Medium
                </div>
            </div>
            
            <div style="flex: 1;">
                <h4>Quick Actions</h4>
                <button id="send-follow-up">Send Follow-up Email</button>
                <button id="schedule-callback">Schedule Callback</button>
                <button id="update-notes">Update Customer Notes</button>
                <button id="generate-report">Generate Report</button>
            </div>
        </div>
    </div>

    <script>
        // Test page interactivity
        document.addEventListener('DOMContentLoaded', function() {
            // Form submission handling
            document.getElementById('demo-form').addEventListener('submit', function(e) {
                e.preventDefault();
                showResult('Form submitted successfully!');
            });

            // Clear form functionality
            document.getElementById('clear-form').addEventListener('click', function() {
                document.getElementById('demo-form').reset();
                showResult('Form cleared.');
            });

            // Button click handlers
            const buttons = [
                'action-approve', 'action-escalate', 'action-close',
                'toggle-status', 'refresh-data', 'send-follow-up',
                'schedule-callback', 'update-notes', 'generate-report'
            ];

            buttons.forEach(buttonId => {
                const button = document.getElementById(buttonId);
                if (button) {
                    button.addEventListener('click', function() {
                        showResult(`Action executed: ${this.textContent || this.innerText}`);
                    });
                }
            });

            // Customer queue clicks
            document.querySelectorAll('[data-customer]').forEach(element => {
                element.addEventListener('click', function() {
                    const customerId = this.getAttribute('data-customer');
                    showResult(`Selected customer: ${customerId}`);
                });
            });

            // Extension connection test
            document.getElementById('test-connection').addEventListener('click', function() {
                testExtensionConnection();
            });

            // Simulate agent task
            document.getElementById('simulate-agent-task').addEventListener('click', function() {
                simulateAgentTask();
            });

            // Update location on hash change
            window.addEventListener('hashchange', function() {
                const location = window.location.hash.substring(1) || 'dashboard';
                document.getElementById('current-location').textContent = 
                    location.charAt(0).toUpperCase() + location.slice(1);
            });

            // Initial extension status check
            checkExtensionStatus();
        });

        function showResult(message) {
            const resultDiv = document.getElementById('demo-results');
            const resultPre = document.getElementById('command-result');
            
            resultPre.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            resultDiv.style.display = 'block';
        }

        function checkExtensionStatus() {
            const statusElement = document.getElementById('extension-status');
            
            // Check if extension is available
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                statusElement.innerHTML = '<span class="status-indicator status-success"></span>Extension connected and ready';
            } else {
                statusElement.innerHTML = '<span class="status-indicator status-error"></span>Extension not detected - install Replivo Helper';
            }
        }

        function testExtensionConnection() {
            showResult('Testing extension connection...');
            
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                chrome.runtime.sendMessage({ type: 'GET_STATUS' }, function(response) {
                    if (response) {
                        showResult(`Extension status: ${JSON.stringify(response, null, 2)}`);
                    } else {
                        showResult('Extension not responding');
                    }
                });
            } else {
                showResult('Chrome extension API not available');
            }
        }

        function simulateAgentTask() {
            showResult('Simulating agent task execution...');
            
            // Simulate a series of agent actions
            setTimeout(() => {
                showResult('Step 1: Extracting customer information...');
                
                setTimeout(() => {
                    showResult('Step 2: Filling support form...');
                    
                    // Auto-fill the form as if an agent did it
                    document.getElementById('customer-name').value = 'Sarah Johnson';
                    document.getElementById('customer-email').value = 'sarah.johnson@example.com';
                    document.getElementById('issue-type').value = 'billing';
                    document.getElementById('issue-description').value = 'Customer requesting refund for order #ORD-78901';
                    document.getElementById('priority').value = 'high';
                    
                    setTimeout(() => {
                        showResult('Step 3: Task completed successfully! Form filled with customer data.');
                    }, 1000);
                }, 1500);
            }, 1000);
        }

        // Expose functions for extension testing
        window.replivoTestAPI = {
            fillForm: function(data) {
                Object.keys(data).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        element.value = data[key];
                    }
                });
                showResult('Form filled by extension');
            },
            
            extractData: function() {
                return {
                    customerName: document.getElementById('display-name').textContent,
                    accountId: document.getElementById('account-id').textContent,
                    orderNumber: document.getElementById('order-number').textContent,
                    orderAmount: document.getElementById('order-amount').textContent
                };
            },
            
            clickElement: function(selector) {
                const element = document.querySelector(selector);
                if (element) {
                    element.click();
                    showResult(`Clicked element: ${selector}`);
                    return true;
                }
                return false;
            }
        };
    </script>
</body>
</html>